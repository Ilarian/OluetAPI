<h1>Olut API etusivu!</h1>
<h2>Haku</h2>
<form onsubmit="searchApi()" action="#">
    <input type="text" id="searchField"/>
    <input type="submit" value="Hae"/>
</form>
<div id="resultDiv">
</div>

<script>
    let baseApiUrl = "http://localhost:8082/api/oluet/";

    function searchApi() {
        let query = document.getElementById("searchField").value;
        const xmlhttp = new XMLHttpRequest();
        const url = baseApiUrl + "haku/" + query;
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                showResult(xmlhttp.responseText);
            }
        };
        xmlhttp.open("GET", url, true);
        xmlhttp.send();
    }

    function showResult(json) {
        let res = JSON.parse(json);
        let resDiv = document.getElementById("resultDiv");
        resDiv.innerHTML = "";
        for (let i = 0; i < res.length; i++) {
            resDiv.innerHTML += "<h3>" + res[i].nimi + "</h3>";
            resDiv.innerHTML += "<p>Valmistaja: " + res[i].valmistaja;
            resDiv.innerHTML += "<p>Tyyppi: " + res[i].tyyppi;
            resDiv.innerHTML += "<p>Alkoholi: " + res[i].alkoholi + "%";
            resDiv.innerHTML += "<p>Kuvaus: " + res[i].maku;
            resDiv.innerHTML += "<p>Suositukset: " + res[i].ruoka;
            resDiv.innerHTML += "<br>";
        }
    }
</script>